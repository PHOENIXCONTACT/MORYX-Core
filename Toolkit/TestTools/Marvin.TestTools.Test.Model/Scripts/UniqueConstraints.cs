using System;
using System.Collections.Generic;
using System.Text;
using Marvin.Model;

namespace Marvin.TestTools.Test.Model
{
	/// <summary>
	/// MARVIN Script class to generate unique constraints for generated tables                                       
	/// This is autogenerated code, therefor any modifications are useless and will be lost on recreation. 
	///                                                                                                    
	/// If you have questions or modification requests contact Thomas Fuchs.                               
	/// </summary>
    internal class TestModelUniqueConstraints : IDatabaseScript
    {
        public string Name { get { return "TestModelUniqueConstraints"; } }

        public bool IsCreationScript { get { return true; } }

        public string GetText()
        {
            var script = new StringBuilder();
#pragma warning disable 219
            // Add trigger on date time enhanced tables
            // ReSharper disable once UnusedVariable
            const string uniqueConstraint = "ALTER TABLE \"{0}\" ADD UNIQUE ({1});";
#pragma warning restore 219
			
			// Add single column unique constrains
			script.AppendLine(string.Format(uniqueConstraint, "TopParent", "\"Number\""));
			script.AppendLine(string.Format(uniqueConstraint, "Inherited", "\"Number\""));

			// Add multi column unique constrains
            return script.ToString();
        }
    }
}
